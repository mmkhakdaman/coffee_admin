import{r as d,a as e,j as t,c as u,F as b,d as f,g as y,b as N}from"./app-6f359ee1.js";import{A as w}from"./AuthenticatedLayout-4ce85176.js";function v({onClosed:s,onCreated:n}){const[r,i]=d.useState({title:""}),[l,h]=d.useState({title:""}),[c,o]=d.useState(!1),g=m=>{const x=m.target.name,p=m.target.value;i({...r,[x]:p})},a=m=>{m.preventDefault(),o(!0),u.post(route("categories.store"),r).then(()=>{o(!1),n()}).catch(x=>{o(!1),h(x.response.data.errors)})};return e("div",{className:"fixed z-10 inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:t("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"}),e("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),t("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg w-full",children:[e("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:t("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-right grow",children:[e("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:"دسته بندی جدید"}),e("div",{className:"mt-2",children:t("p",{className:"text-sm text-gray-500",children:[e("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 w-full",children:"عنوان دسته بندی"}),e("input",{type:"text",name:"title",id:"title",className:"mt-1 focus:ring-green-500 focus:border-green-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"عنوان دسته بندی",onChange:g}),l.title&&e("small",{className:"text-red-500 text-xs italic",children:l.title})]})})]})}),t("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:a,disabled:c,children:"ذخیره"}),e("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:s,children:"انصراف"})]})]})]})})}function C({onCategorySelected:s}){const[n,r]=d.useState(!1),[i,l]=d.useState([]),[h,c]=d.useState(0),o=()=>{u.get(route("categories.index")).then(a=>{l(a.data.data),a.data.data.length>0&&(c(a.data.data[0].id),s(a.data.data[0].id))})};d.useEffect(()=>{o()},[]);function g(a){c(a),s(a)}return t(b,{children:[n&&e(v,{onClosed:function(){r(!1)},onCreated:function(){r(!1),o()}}),t("div",{className:"flex text-white space-x-reverse space-x-2 items-start",children:[e("button",{className:"py-0.5 px-3 text-sm rounded-full whitespace-nowrap border border-neutral-700 bg-white text-neutral-700",onClick:()=>r(!0),children:"دسته بندی جدید +"}),e("div",{className:"flex text-white space-x-reverse space-x-2 overflow-x-auto pb-4",children:i.map(a=>e("button",{className:`py-0.5 px-3 text-sm rounded-full whitespace-nowrap ${h===a.id?"bg-neutral-700 text-white":"text-neutral-700"}`,onClick:()=>g(a.id),children:a.title},a.id))})]})]})}function k({product:s}){const n=()=>{u.put(route("products.toggle-in-stock",s.id)).then(r=>{y.reload()})};return t("div",{className:"flex flex-row justify-between bg-white p-4 rounded-xl space-x-2 shadow",children:[t("div",{className:"grow flex flex-col space-y-2 justify-between",children:[t("div",{className:"flex flex-col space-y-1",children:[e("h1",{className:"text-lg font-semibold text-gray-800 leading-tight",children:s.title}),e("p",{className:"text-sm text-gray-500",children:s.description})]}),e("div",{className:"flex flex-col mt-2 space-y-2",children:t("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e("span",{className:"text-sm font-semibold text-gray-800 leading-tight",children:"موجود"}),e("button",{className:"flex items-center cursor-pointer",onClick:n,children:t("div",{className:"relative",children:[e("input",{type:"checkbox",className:"hidden"}),e("div",{className:"toggle__line w-10 h-6 rounded-full shadow-inner"+(s.in_stock?" bg-green-400":" bg-gray-400")}),s.in_stock?e("div",{className:"toggle__dot absolute w-6 h-6 bg-white rounded-full shadow inset-y-0 left-0"}):e("div",{className:"toggle__dot absolute w-6 h-6 bg-white rounded-full shadow inset-y-0 right-0"})]})})]})}),t("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e("span",{className:"text-sm font-semibold text-gray-800 leading-tight",children:s.price.toLocaleString()}),e("span",{className:"text-gray-400",children:"تومان"})]})]}),t("div",{className:"flex flex-col space-y-4 flex-shrink-0",children:[e("img",{src:s.image_url,className:"w-24 h-24 rounded-lg object-cover",alt:"food"}),e(f,{href:route("products.edit",s.id),className:"border text-center border-green-500 text-green-500 hover:bg-green-700 hover:text-white hover:border-green-700 font-bold py-1 px-2 rounded-lg",children:"ویرایش"})]})]})}function _({auth:s,products:n,categories:r}){return t(w,{user:s.user,header:e("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"محصولات"}),children:[e(N,{title:"محصولات"}),e("div",{className:"py-8",children:t("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e("div",{className:"px-4",children:e(C,{onCategorySelected:i=>{const l=document.getElementById(`category-${i}`);l&&l.scrollIntoView({behavior:"smooth"})}})}),t("div",{className:"px-4 mt-4",children:[t("div",{className:"flex justify-between",children:[e("h1",{className:"text-2xl font-semibold text-gray-800 leading-tight",children:"محصولات"}),e(f,{href:route("products.create"),className:"bg-green-500 text-white hover:bg-green-700 font-bold py-1 px-2 rounded-lg",children:"محصول جدید"})]}),e("div",{className:"flex flex-col mt-6 space-y-6",children:r.map(i=>t("div",{className:"flex-col space-y-4",id:`category-${i.id}`,children:[e("h2",{className:"text-xl font-semibold text-gray-800 leading-tight",children:i.title}),e("div",{className:"flex flex-col space-y-4",children:n.filter(l=>l.category_id===i.id).map(l=>e(k,{product:l},l.id))})]},i.id))})]})]})})]})}export{_ as default};
